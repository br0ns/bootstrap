#!/bin/bash
source "$(dirname "$0")/bs.sh"

if [ ! -f .ssh/id_rsa ] || [ "$FORCE" = true ] ; then
    INFO "Installing SSH private key"
    mkdir -p .ssh
    base64 -d > .ssh/id_rsa.gpg <<EOF
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
EOF
    gpg .ssh/id_rsa.gpg
    chmod 0400 .ssh/id_rsa
    ssh-keygen -y -f .ssh/id_rsa > .ssh/id_rsa.pub
    assert [ -f .ssh/id_rsa ]
fi
