#!/bin/bash
source "$(dirname "$0")/bs.sh"

if [ ! -f .ssh/id_rsa ] || [ "$FORCE" = true ] ; then
    INFO "Installing SSH private key"
    mkdir -p .ssh
    base64 -d > .ssh/id_rsa.gpg <<EOF
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
22I=
EOF
    gpg .ssh/id_rsa.gpg
    chmod 0400 .ssh/id_rsa
    ssh-keygen -y -f .ssh/id_rsa > .ssh/id_rsa.pub
    assert [ -f .ssh/id_rsa ]
fi
